<div class="video-rewards-container">
  <div class="background-container"></div>

  <div class="content-container">
    <header class="header">
      <app-header></app-header>
    </header>

    <div class="main-content">
      <div class="rewards-card">
        <h2>{{ 'VIDEO_REWARDS.TITLE' | translate }}</h2>

        <div class="rewards-info">
          <p>{{ 'VIDEO_REWARDS.INFO_TEXT' | translate }} <span class="highlight">50 {{ 'VIDEO_REWARDS.POINTS_PER_VIDEO' | translate }}</span></p>
          <p class="small">{{ 'VIDEO_REWARDS.DAILY_LIMIT' | translate }}</p>
        </div>

        <div class="video-container" *ngIf="currentVideo">
          <div class="video-wrapper" *ngIf="showVideo">
            <iframe
              [src]="videoUrl"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>

            <div class="progress-container">
              <div class="progress-bar" [style.width.%]="progressPercentage"></div>
            </div>

            <div class="time-remaining">
              {{ 'VIDEO_REWARDS.TIME_REMAINING' | translate }} {{remainingTime}} {{ 'VIDEO_REWARDS.SECONDS' | translate }}
            </div>
          </div>

          <div class="video-completed" *ngIf="videoCompleted">
            <div class="success-icon">âœ“</div>
            <h3>{{ 'VIDEO_REWARDS.VIDEO_COMPLETED' | translate }}</h3>
            <p>{{ 'VIDEO_REWARDS.POINTS_EARNED' | translate }} <span class="points-earned">{{pointsEarned}}</span> {{ 'VIDEO_REWARDS.POINTS' | translate }}</p>
            <button class="next-video-btn" (click)="loadNextVideo()" [disabled]="dailyLimitReached">
              {{ dailyLimitReached ? ('VIDEO_REWARDS.DAILY_LIMIT_REACHED' | translate) : ('VIDEO_REWARDS.NEXT_VIDEO' | translate) }}
            </button>
          </div>
        </div>

        <div class="start-container" *ngIf="!currentVideo && !dailyLimitReached">
          <button class="start-btn" (click)="startWatchingVideos()">
            <img src="assets/monedapnw.png" alt="Moneda" class="coin-icon">
            {{ 'VIDEO_REWARDS.START_BUTTON' | translate }}
          </button>
        </div>

        <div class="limit-reached" *ngIf="dailyLimitReached && !currentVideo">
          <p>{{ 'VIDEO_REWARDS.LIMIT_REACHED_TEXT' | translate }}</p>
          <p>{{ 'VIDEO_REWARDS.COME_BACK_TOMORROW' | translate }}</p>
        </div>

        <div class="stats">
          <div class="stat-item">
            <span class="stat-label">{{ 'VIDEO_REWARDS.VIDEOS_WATCHED' | translate }}</span>
            <span class="stat-value">{{videosWatchedToday}}/5</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">{{ 'VIDEO_REWARDS.POINTS_EARNED_TODAY' | translate }}</span>
            <span class="stat-value">{{pointsEarnedToday}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>