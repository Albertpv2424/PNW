<div class="background-container"></div>

<div class="main-layout">
  <header class="header">
    <app-header></app-header>
  </header>

  <div class="content-container">
    <main class="main-content">
      <div class="premios-container">
        <div class="premios-header">
          <h2>{{ 'PRIZES.AVAILABLE_PRIZES' | translate }}</h2>
          <div class="filtros">
            <button class="filtro-button" (click)="ordenarPorPuntos()">
              @if (ordenAscendente) {
                {{ 'PRIZES.SORT_ASC' | translate }}
              } @else {
                {{ 'PRIZES.SORT_DESC' | translate }}
              }
            </button>
          </div>
        </div>

        @if (isLoading) {
          <div class="loading-spinner">{{ 'PRIZES.LOADING' | translate }}</div>
        } @else if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
        } @else if (premiosFiltrados.length === 0) {
          <div class="empty-message">{{ 'PRIZES.NO_PRIZES_AVAILABLE' | translate }}</div>
        } @else {
          <div class="premios-grid">
            @if (isLoading) {
              <div class="loading-spinner">{{ 'PRIZES.LOADING' | translate }}</div>
            } @else if (errorMessage) {
              <div class="error-message">{{ errorMessage }}</div>
            } @else {
              @for (premio of premiosFiltrados; track premio.id) {
                <div class="premio-card">
                  <!-- Replace the existing image tag with this one -->
                  <div class="premio-image">
                    <!-- Find the image tag and make sure it's using the handleImageError method -->
                    <img [src]="premio.image" [alt]="premio.name" (error)="handleImageError($event)">
                  </div>
                  <div class="premio-info">
                    <h3>{{ premio.name }}</h3>
                    <p *ngIf="premio.description" class="description">{{ premio.description }}</p>
                    <p class="points">{{ premio.points }} <img src="assets/monedapnw.png" alt="Moneda PNW" class="coin-icon"></p>
                    <button class="canjear-button" (click)="onCanjear(premio.id)">{{ 'PRIZES.REDEEM_BUTTON' | translate }}</button>
                  </div>
                </div>
              }
            }
          </div>
        }
      </div>
    </main>
  </div>
</div>

<app-combined-bet></app-combined-bet>