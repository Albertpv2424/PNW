<div class="background-container"></div>

<div class="main-layout">
  <header class="header">
    <app-header></app-header>
  </header>

  <div class="content-container">
    <main class="main-content">
      <div class="promociones-container">
        <div class="promociones-header">
          <h2>Promociones Activas</h2>
        </div>
        
        @if (isLoading) {
          <div class="loading-spinner">Cargando promociones...</div>
        } @else if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
        } @else if (promociones.length === 0) {
          <div class="empty-message">No hay promociones disponibles en este momento.</div>
        } @else {
          <div class="promociones-grid">
            @for (promocion of promociones; track promocion.id) {
              <div class="promocion-card" 
                   [class.expired]="promocion.isExpired"
                   [class.inscrito]="promocion.isInscrito">
                <div class="promocion-image">
                  <img [src]="promocion.image" [alt]="promocion.title" (error)="handleImageError($event, promocion)">
                </div>
                <div class="promocion-info">
                  <div class="promocion-type">{{ promocion.type }}</div>
                  <h3>{{ promocion.title }}</h3>
                  <p class="description">{{ promocion.description }}</p>
                  <div class="promocion-dates">
                    <span>VÃ¡lido: {{ formatDate(promocion.startDate) }} - {{ formatDate(promocion.endDate) }}</span>
                  </div>
                  <button class="inscribir-button" 
                          (click)="onInscribir(promocion.id)"
                          [disabled]="promocion.isInscrito || promocion.isExpired">
                    {{ promocion.buttonText }}
                  </button>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </main>
  </div>
</div>

<app-combined-bet></app-combined-bet>