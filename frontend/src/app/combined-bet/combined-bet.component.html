<div class="combined-bet-panel" 
     *ngIf="selections.length > 0" 
     [class.minimized]="isMinimized"
     [class.menu-open]="menuOpen">
  <div class="panel-header">
    <button class="toggle-panel" (click)="toggleMinimize()">
      {{ isMinimized ? '▼' : '▲' }}
    </button>
    <h3>{{ selections.length === 1 ? 'APUESTA SIMPLE' : 'APUESTA COMBINADA' }}</h3>
    <button class="clear-button" (click)="clearSelections()">Limpiar</button>
  </div>
  
  <div class="selections-list">
    <!-- Fixed the div structure and added trackBy -->
    <div *ngFor="let selection of selections; trackBy: trackBySelection">
      <div class="selection-item">
        <button class="remove-button" (click)="removeSelection(selection.matchId)">×</button>
        <div class="match-info">{{ selection.matchInfo }}</div>
        <div class="bet-info">
          <span>{{ selection.teamName }}</span>
          <span class="odds">{{ selection.odds }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="total-section">
    <div class="total-odds">
      <span>Cuota total:</span>
      <span>{{ totalOdds | number:'1.2-2' }}</span>
    </div>
    <div class="bet-amount">
      <label>Cantidad:</label>
      <input type="number" [(ngModel)]="betAmount" min="1" step="1">
    </div>
    <div class="potential-win">
      <span>Ganancia potencial:</span>
      <span class="win-amount">{{ betAmount * totalOdds | number:'1.2-2' }} <img src="assets/monedapnw.png" alt="Moneda PNW" class="coin-icon"></span>
    </div>
    <button class="place-bet-button" (click)="placeBet()" [disabled]="!betAmount || betAmount <= 0">
      REALIZAR APUESTA
    </button>
  </div>
</div>