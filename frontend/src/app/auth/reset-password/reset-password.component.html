<div class="reset-container">
    <div class="reset-card">
      <!-- AÃ±adir selector de idioma en la esquina superior derecha -->
      <div class="top-right-language">
        <app-language-slider></app-language-slider>
      </div>
      
      <!-- Actualizar el logo para que sea clickable y tenga mÃ¡rgenes -->
      <img src="../../../assets/logo.jpg" alt="Logo" class="logo logo-clickable" 
           (click)="navigateToHome()" 
           (error)="handleImageError($event)">
      
      <h1 style="color: white;">{{ 'AUTH.RESET_PASSWORD' | translate }}</h1>

      <!-- Step 1: Email verification -->
      <div *ngIf="currentStep === 1">
        <p style="color: white;">{{ 'AUTH.RESET_INSTRUCTIONS' | translate }}</p>

        <form class="reset-form" [formGroup]="emailForm" (ngSubmit)="verifyEmail()">
          <div class="input-container">
            <input type="email" formControlName="email" placeholder="">
            <label>{{ 'AUTH.EMAIL' | translate }}</label>
          </div>

          <button type="submit" class="submit-button">{{ 'AUTH.SEND_EMAIL' | translate }}</button>

          <div class="login-link">
            <a routerLink="/login">{{ 'AUTH.BACK_TO_LOGIN' | translate }}</a>
          </div>
        </form>
      </div>

      <!-- Step 2: Email sent confirmation -->
      <div *ngIf="currentStep === 2" class="email-sent-confirmation">
        <div class="email-icon">ðŸ“§</div>
        <p style="color: white;">{{ 'AUTH.EMAIL_SENT' | translate }}</p>
        <p style="color: white;">{{ 'AUTH.CHECK_INBOX' | translate }}</p>
        <button class="resend-button" (click)="verifyEmail()">{{ 'AUTH.RESEND_EMAIL' | translate }}</button>
        <div class="login-link">
          <a routerLink="/login">{{ 'AUTH.BACK_TO_LOGIN' | translate }}</a>
        </div>
      </div>

      <!-- Step 3: Password reset (will be accessed via email link) -->
      <div *ngIf="currentStep === 3">
        <p style="color: white;">{{ 'AUTH.ENTER_NEW_PASSWORD' | translate }}</p>

        <form class="reset-form" [formGroup]="resetForm" (ngSubmit)="resetPassword()">
          <div class="input-container">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="">
            <label>{{ 'AUTH.NEW_PASSWORD' | translate }}</label>
            <span class="eye-icon" (click)="togglePassword('password')"></span>
          </div>

          <div class="input-container">
            <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" placeholder="">
            <label>{{ 'AUTH.CONFIRM_PASSWORD' | translate }}</label>
            <span class="eye-icon" (click)="togglePassword('confirmPassword')"></span>
          </div>

          <button type="submit" class="submit-button">{{ 'AUTH.RESET_PASSWORD_BUTTON' | translate }}</button>

          <div class="login-link">
            <a routerLink="/login">{{ 'AUTH.BACK_TO_LOGIN' | translate }}</a>
          </div>
        </form>
      </div>
    </div>
</div>