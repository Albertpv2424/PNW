<div class="reset-container">
    <div class="reset-card">
      <img src="../../../assets/logo.jpg" alt="Logo" class="logo">
      <h1 style="color: white;">Restablecer contraseña</h1>

      <!-- Step 1: Email verification -->
      <div *ngIf="currentStep === 1">
        <p style="color: white;">Introduce tu correo electrónico para recuperar tu cuenta.</p>

        <form class="reset-form" [formGroup]="emailForm" (ngSubmit)="verifyEmail()">
          <div class="input-container">
            <input type="email" formControlName="email" placeholder="">
            <label>Correo electrónico</label>
          </div>

          <button type="submit" class="submit-button">Enviar correo electrónico</button>

          <div class="login-link">
            <a routerLink="/login">Volver al inicio de sesión</a>
          </div>
        </form>
      </div>

      <!-- Step 2: Email sent confirmation -->
      <div *ngIf="currentStep === 2">
        <div class="email-sent-confirmation">
          <div class="email-icon">✉️</div>
          <h2 style="color: white;">Correo enviado</h2>
          <p style="color: white;">Hemos enviado un enlace de restablecimiento a tu correo electrónico. Por favor, revisa tu bandeja de entrada y sigue las instrucciones.</p>
          <p style="color: #ccc; margin-top: 15px;">¿No has recibido el correo?</p>
          <button (click)="verifyEmail()" class="resend-button">Reenviar correo</button>
          <div class="login-link" style="margin-top: 20px;">
            <a routerLink="/login">Volver al inicio de sesión</a>
          </div>
        </div>
      </div>

      <!-- Step 3: Password reset (will be accessed via email link) -->
      <div *ngIf="currentStep === 3">
        <p style="color: white;">Introduce tu nueva contraseña.</p>

        <form class="reset-form" [formGroup]="resetForm" (ngSubmit)="onSubmit()">
          <div class="input-container">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="">
            <label>Nueva contraseña</label>
            <span class="eye-icon" (click)="togglePassword('password')">👁️</span>
          </div>

          <div class="input-container">
            <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" placeholder="">
            <label>Confirmar contraseña</label>
            <span class="eye-icon" (click)="togglePassword('confirmPassword')">👁️</span>
          </div>

          <button type="submit" class="submit-button">Restablecer Contraseña</button>
        </form>
      </div>
    </div>
</div>