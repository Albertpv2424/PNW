<div class="wheel-icon" (click)="toggleWheel()" [class.disabled]="!canSpin">
  ðŸŽ¡
  <div class="notification-dot" *ngIf="canSpin"></div>
</div>

<div class="wheel-modal" *ngIf="isOpen">
  <div class="wheel-container">
    <div class="wheel-header">
      <h2>Ruleta Diaria</h2>
      <button class="close-button" (click)="toggleWheel()">Ã—</button>
    </div>
    <div class="wheel-content">
      <canvas #wheelCanvas width="400" height="400"></canvas>

      <div class="wheel-controls">
        <button class="spin-button" (click)="spinWheel()" [disabled]="!canSpin || isSpinning">
          {{ isSpinning ? 'Girando...' : (canSpin ? 'Girar' : 'Ya has girado hoy') }}
        </button>

        <div class="wheel-info" *ngIf="!canSpin && !isSpinning">
          PodrÃ¡s volver a girar maÃ±ana
        </div>
      </div>

      <!-- Only show the prize after spinning is complete -->
      <div class="prize-display" *ngIf="selectedPrize && !isSpinning">
        <p>Â¡Has ganado!</p>
        <div class="prize-amount">
          {{ selectedPrize }} <img src="assets/monedapnw.png" alt="Moneda" class="coin-icon">
        </div>
      </div>

      <!-- Show last earned points when can't spin and no current prize selected -->
      <div class="prize-display" *ngIf="!canSpin && !selectedPrize && lastEarnedPoints">
        <p>Hoy has ganado:</p>
        <div class="prize-amount">
          {{ lastEarnedPoints }} <img src="assets/monedapnw.png" alt="Moneda" class="coin-icon">
        </div>
      </div>
    </div>
  </div>
</div>