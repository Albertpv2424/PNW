<div class="wheel-icon" (click)="toggleWheel()" [class.disabled]="!canSpin">
  ðŸŽ¡
  <div class="notification-dot" *ngIf="canSpin"></div>
</div>

<div class="wheel-modal" *ngIf="isOpen">
  <div class="wheel-container">
    <div class="wheel-header">
      <h2>{{ 'DAILY_WHEEL.TITLE' | translate }}</h2>
      <button class="close-button" (click)="toggleWheel()">Ã—</button>
    </div>
    <div class="wheel-content">
      <canvas #wheelCanvas width="400" height="400"></canvas>

      <div class="wheel-controls">
        <button class="spin-button" (click)="spinWheel()" [disabled]="!canSpin || isSpinning">
          {{ isSpinning ? ('DAILY_WHEEL.SPINNING' | translate) : (canSpin ? ('DAILY_WHEEL.SPIN_BUTTON' | translate) : ('DAILY_WHEEL.ALREADY_SPUN' | translate)) }}
        </button>

        <div class="wheel-info" *ngIf="!canSpin && !isSpinning">
          {{ 'DAILY_WHEEL.SPIN_TOMORROW' | translate }}
        </div>
      </div>

      <!-- Only show the prize after spinning is complete -->
      <div class="prize-display" *ngIf="selectedPrize && !isSpinning">
        <p>{{ 'DAILY_WHEEL.YOU_WON' | translate }}</p>
        <div class="prize-amount">
          {{ selectedPrize }} <img src="assets/monedapnw.png" alt="Moneda" class="coin-icon">
        </div>
      </div>

      <!-- Show last earned points when can't spin and no current prize selected -->
      <div class="prize-display" *ngIf="!canSpin && !selectedPrize && lastEarnedPoints">
        <p>{{ 'DAILY_WHEEL.TODAY_WON' | translate }}</p>
        <div class="prize-amount">
          {{ lastEarnedPoints }} <img src="assets/monedapnw.png" alt="Moneda" class="coin-icon">
        </div>
      </div>
    </div>
  </div>
</div>